"use strict";var KTToggle=function(t,e){var n=this,g=KTUtil.get(t);KTUtil.get("body");if(g){var r={togglerState:"",targetState:""},o={construct:function(t){return KTUtil.data(g).has("toggle")?n=KTUtil.data(g).get("toggle"):(o.init(t),o.build(),KTUtil.data(g).set("toggle",n)),n},init:function(t){n.element=g,n.events=[],n.options=KTUtil.deepExtend({},r,t),n.target=KTUtil.get(n.options.target),n.targetState=n.options.targetState,n.togglerState=n.options.togglerState,n.state=KTUtil.hasClasses(n.target,n.targetState)?"on":"off"},build:function(){KTUtil.addEvent(g,"mouseup",o.toggle)},toggle:function(t){return o.eventTrigger("beforeToggle"),"off"==n.state?o.toggleOn():o.toggleOff(),o.eventTrigger("afterToggle"),t.preventDefault(),n},toggleOn:function(){return o.eventTrigger("beforeOn"),KTUtil.addClass(n.target,n.targetState),n.togglerState&&KTUtil.addClass(g,n.togglerState),n.state="on",o.eventTrigger("afterOn"),o.eventTrigger("toggle"),n},toggleOff:function(){return o.eventTrigger("beforeOff"),KTUtil.removeClass(n.target,n.targetState),n.togglerState&&KTUtil.removeClass(g,n.togglerState),n.state="off",o.eventTrigger("afterOff"),o.eventTrigger("toggle"),n},eventTrigger:function(t){for(var e=0;e<n.events.length;e++){var g=n.events[e];if(g.name==t){if(1!=g.one)return g.handler.call(this,n);if(0==g.fired)return n.events[e].fired=!0,g.handler.call(this,n)}}},addEvent:function(t,e,g){return n.events.push({name:t,handler:e,one:g,fired:!1}),n}};return n.setDefaults=function(t){r=t},n.getState=function(){return n.state},n.toggle=function(){return o.toggle()},n.toggleOn=function(){return o.toggleOn()},n.toggleOff=function(){return o.toggleOff()},n.on=function(t,e){return o.addEvent(t,e)},n.one=function(t,e){return o.addEvent(t,e,!0)},o.construct.apply(n,[e]),n}};"undefined"!=typeof module&&void 0!==module.exports&&(module.exports=KTToggle);
