"use strict";var KTMenu=function(e,t){var n=this,o=!1,i=KTUtil.get(e),u=KTUtil.get("body");if(i){var l={scroll:{rememberPosition:!1},accordion:{slideSpeed:200,autoScroll:!1,autoScrollSpeed:1200,expandAll:!0},dropdown:{timeout:500}},r={construct:function(e){return KTUtil.data(i).has("menu")?n=KTUtil.data(i).get("menu"):(r.init(e),r.reset(),r.build(),KTUtil.data(i).set("menu",n)),n},init:function(e){n.events=[],n.eventHandlers={},n.options=KTUtil.deepExtend({},l,e),n.pauseDropdownHoverTime=0,n.uid=KTUtil.getUniqueID()},update:function(e){n.options=KTUtil.deepExtend({},l,e),n.pauseDropdownHoverTime=0,r.reset(),n.eventHandlers={},r.build(),KTUtil.data(i).set("menu",n)},reload:function(){r.reset(),r.build(),r.resetSubmenuProps()},build:function(){n.eventHandlers.event_1=KTUtil.on(i,".kt-menu__toggle","click",r.handleSubmenuAccordion),("dropdown"===r.getSubmenuMode()||r.isConditionalSubmenuDropdown())&&(n.eventHandlers.event_2=KTUtil.on(i,'[data-ktmenu-submenu-toggle="hover"]',"mouseover",r.handleSubmenuDrodownHoverEnter),n.eventHandlers.event_3=KTUtil.on(i,'[data-ktmenu-submenu-toggle="hover"]',"mouseout",r.handleSubmenuDrodownHoverExit),n.eventHandlers.event_4=KTUtil.on(i,'[data-ktmenu-submenu-toggle="click"] > .kt-menu__toggle, [data-ktmenu-submenu-toggle="click"] > .kt-menu__link .kt-menu__toggle',"click",r.handleSubmenuDropdownClick),n.eventHandlers.event_5=KTUtil.on(i,'[data-ktmenu-submenu-toggle="tab"] > .kt-menu__toggle, [data-ktmenu-submenu-toggle="tab"] > .kt-menu__link .kt-menu__toggle',"click",r.handleSubmenuDropdownTabClick)),n.eventHandlers.event_6=KTUtil.on(i,".kt-menu__item > .kt-menu__link:not(.kt-menu__toggle):not(.kt-menu__link--toggle-skip)","click",r.handleLinkClick),n.options.scroll&&n.options.scroll.height&&r.scrollInit()},reset:function(){KTUtil.off(i,"click",n.eventHandlers.event_1),KTUtil.off(i,"mouseover",n.eventHandlers.event_2),KTUtil.off(i,"mouseout",n.eventHandlers.event_3),KTUtil.off(i,"click",n.eventHandlers.event_4),KTUtil.off(i,"click",n.eventHandlers.event_5),KTUtil.off(i,"click",n.eventHandlers.event_6)},scrollInit:function(){n.options.scroll&&n.options.scroll.height?(KTUtil.scrollDestroy(i),KTUtil.scrollInit(i,{mobileNativeScroll:!0,windowScroll:!1,resetHeightOnDestroy:!0,handleWindowResize:!0,height:n.options.scroll.height,rememberPosition:n.options.scroll.rememberPosition})):KTUtil.scrollDestroy(i)},scrollUpdate:function(){n.options.scroll&&n.options.scroll.height&&KTUtil.scrollUpdate(i)},scrollTop:function(){n.options.scroll&&n.options.scroll.height&&KTUtil.scrollTop(i)},getSubmenuMode:function(e){return KTUtil.isInResponsiveRange("desktop")?e&&KTUtil.hasAttr(e,"data-ktmenu-submenu-toggle")&&"hover"==KTUtil.attr(e,"data-ktmenu-submenu-toggle")?"dropdown":KTUtil.isset(n.options.submenu,"desktop.state.body")?KTUtil.hasClasses(u,n.options.submenu.desktop.state.body)?n.options.submenu.desktop.state.mode:n.options.submenu.desktop.default:KTUtil.isset(n.options.submenu,"desktop")?n.options.submenu.desktop:void 0:KTUtil.isInResponsiveRange("tablet")&&KTUtil.isset(n.options.submenu,"tablet")?n.options.submenu.tablet:!(!KTUtil.isInResponsiveRange("mobile")||!KTUtil.isset(n.options.submenu,"mobile"))&&n.options.submenu.mobile},isConditionalSubmenuDropdown:function(){return!(!KTUtil.isInResponsiveRange("desktop")||!KTUtil.isset(n.options.submenu,"desktop.state.body"))},resetSubmenuProps:function(e){var t=KTUtil.findAll(i,".kt-menu__submenu");if(t)for(var n=0,o=t.length;n<o;n++)KTUtil.css(t[0],"display",""),KTUtil.css(t[0],"overflow","")},handleSubmenuDrodownHoverEnter:function(e){if("accordion"!==r.getSubmenuMode(this)&&!1!==n.resumeDropdownHover()){"1"==this.getAttribute("data-hover")&&(this.removeAttribute("data-hover"),clearTimeout(this.getAttribute("data-timeout")),this.removeAttribute("data-timeout")),r.showSubmenuDropdown(this)}},handleSubmenuDrodownHoverExit:function(e){if(!1!==n.resumeDropdownHover()&&"accordion"!==r.getSubmenuMode(this)){var t=this,o=n.options.dropdown.timeout,i=setTimeout(function(){"1"==t.getAttribute("data-hover")&&r.hideSubmenuDropdown(t,!0)},o);t.setAttribute("data-hover","1"),t.setAttribute("data-timeout",i)}},handleSubmenuDropdownClick:function(e){if("accordion"!==r.getSubmenuMode(this)){var t=this.closest(".kt-menu__item");"accordion"!=t.getAttribute("data-ktmenu-submenu-mode")&&(!1===KTUtil.hasClass(t,"kt-menu__item--hover")?(KTUtil.addClass(t,"kt-menu__item--open-dropdown"),r.showSubmenuDropdown(t)):(KTUtil.removeClass(t,"kt-menu__item--open-dropdown"),r.hideSubmenuDropdown(t,!0)),e.preventDefault())}},handleSubmenuDropdownTabClick:function(e){if("accordion"!==r.getSubmenuMode(this)){var t=this.closest(".kt-menu__item");"accordion"!=t.getAttribute("data-ktmenu-submenu-mode")&&(0==KTUtil.hasClass(t,"kt-menu__item--hover")&&(KTUtil.addClass(t,"kt-menu__item--open-dropdown"),r.showSubmenuDropdown(t)),e.preventDefault())}},handleLinkClick:function(e){var t=this.closest(".kt-menu__item.kt-menu__item--submenu");!1!==r.eventTrigger("linkClick",this,e)&&t&&"dropdown"===r.getSubmenuMode(t)&&r.hideSubmenuDropdowns()},handleSubmenuDropdownClose:function(e,t){if("accordion"!==r.getSubmenuMode(t)){var n=i.querySelectorAll(".kt-menu__item.kt-menu__item--submenu.kt-menu__item--hover:not(.kt-menu__item--tabs)");if(n.length>0&&!1===KTUtil.hasClass(t,"kt-menu__toggle")&&0===t.querySelectorAll(".kt-menu__toggle").length)for(var o=0,u=n.length;o<u;o++)r.hideSubmenuDropdown(n[0],!0)}},handleSubmenuAccordion:function(e,t){var o,i=t||this;if("dropdown"===r.getSubmenuMode(t)&&(o=i.closest(".kt-menu__item"))&&"accordion"!=o.getAttribute("data-ktmenu-submenu-mode"))e.preventDefault();else{var u=i.closest(".kt-menu__item"),l=KTUtil.child(u,".kt-menu__submenu, .kt-menu__inner");if(!KTUtil.hasClass(i.closest(".kt-menu__item"),"kt-menu__item--open-always")&&u&&l){e.preventDefault();var s=n.options.accordion.slideSpeed;if(!1===KTUtil.hasClass(u,"kt-menu__item--open")){if(!1===n.options.accordion.expandAll){var m=i.closest(".kt-menu__nav, .kt-menu__subnav"),a=KTUtil.children(m,".kt-menu__item.kt-menu__item--open.kt-menu__item--submenu:not(.kt-menu__item--here):not(.kt-menu__item--open-always)");if(m&&a)for(var d=0,c=a.length;d<c;d++){var _=a[0],p=KTUtil.child(_,".kt-menu__submenu");p&&KTUtil.slideUp(p,s,function(){r.scrollUpdate(),KTUtil.removeClass(_,"kt-menu__item--open")})}}KTUtil.slideDown(l,s,function(){r.scrollToItem(i),r.scrollUpdate(),r.eventTrigger("submenuToggle",l,e)}),KTUtil.addClass(u,"kt-menu__item--open")}else KTUtil.slideUp(l,s,function(){r.scrollToItem(i),r.eventTrigger("submenuToggle",l,e)}),KTUtil.removeClass(u,"kt-menu__item--open")}}},scrollToItem:function(e){KTUtil.isInResponsiveRange("desktop")&&n.options.accordion.autoScroll&&"1"!==i.getAttribute("data-ktmenu-scroll")&&KTUtil.scrollTo(e,n.options.accordion.autoScrollSpeed)},hideSubmenuDropdown:function(e,t){t&&(KTUtil.removeClass(e,"kt-menu__item--hover"),KTUtil.removeClass(e,"kt-menu__item--active-tab")),e.removeAttribute("data-hover"),e.getAttribute("data-ktmenu-dropdown-toggle-class")&&KTUtil.removeClass(u,e.getAttribute("data-ktmenu-dropdown-toggle-class"));var n=e.getAttribute("data-timeout");e.removeAttribute("data-timeout"),clearTimeout(n)},hideSubmenuDropdowns:function(){var e;if(e=i.querySelectorAll('.kt-menu__item--submenu.kt-menu__item--hover:not(.kt-menu__item--tabs):not([data-ktmenu-submenu-toggle="tab"])'))for(var t=0,n=e.length;t<n;t++)r.hideSubmenuDropdown(e[t],!0)},showSubmenuDropdown:function(e){var t=i.querySelectorAll(".kt-menu__item--submenu.kt-menu__item--hover, .kt-menu__item--submenu.kt-menu__item--active-tab");if(t)for(var n=0,o=t.length;n<o;n++){var l=t[n];e!==l&&!1===l.contains(e)&&!1===e.contains(l)&&r.hideSubmenuDropdown(l,!0)}KTUtil.addClass(e,"kt-menu__item--hover"),e.getAttribute("data-ktmenu-dropdown-toggle-class")&&KTUtil.addClass(u,e.getAttribute("data-ktmenu-dropdown-toggle-class"))},createSubmenuDropdownClickDropoff:function(e){var t,n=(t=KTUtil.child(e,".kt-menu__submenu")?KTUtil.css(t,"z-index"):0)-1,o=document.createElement('<div class="kt-menu__dropoff" style="background: transparent; position: fixed; top: 0; bottom: 0; left: 0; right: 0; z-index: '+n+'"></div>');u.appendChild(o),KTUtil.addEvent(o,"click",function(t){t.stopPropagation(),t.preventDefault(),KTUtil.remove(this),r.hideSubmenuDropdown(e,!0)})},pauseDropdownHover:function(e){var t=new Date;n.pauseDropdownHoverTime=t.getTime()+e},resumeDropdownHover:function(){return(new Date).getTime()>n.pauseDropdownHoverTime},resetActiveItem:function(e){for(var t,o,u=0,l=(t=i.querySelectorAll(".kt-menu__item--active")).length;u<l;u++){var r=t[0];KTUtil.removeClass(r,"kt-menu__item--active"),KTUtil.hide(KTUtil.child(r,".kt-menu__submenu"));for(var s=0,m=(o=KTUtil.parents(r,".kt-menu__item--submenu")||[]).length;s<m;s++){var a=o[u];KTUtil.removeClass(a,"kt-menu__item--open"),KTUtil.hide(KTUtil.child(a,".kt-menu__submenu"))}}if(!1===n.options.accordion.expandAll&&(t=i.querySelectorAll(".kt-menu__item--open")))for(u=0,l=t.length;u<l;u++)KTUtil.removeClass(o[0],"kt-menu__item--open")},setActiveItem:function(e){r.resetActiveItem();for(var t=KTUtil.parents(e,".kt-menu__item--submenu")||[],n=0,o=t.length;n<o;n++)KTUtil.addClass(KTUtil.get(t[n]),"kt-menu__item--open");KTUtil.addClass(KTUtil.get(e),"kt-menu__item--active")},getBreadcrumbs:function(e){var t,n=[],o=KTUtil.child(e,".kt-menu__link");n.push({text:t=KTUtil.child(o,".kt-menu__link-text")?t.innerHTML:"",title:o.getAttribute("title"),href:o.getAttribute("href")});for(var i=KTUtil.parents(e,".kt-menu__item--submenu"),u=0,l=i.length;u<l;u++){var r=KTUtil.child(i[u],".kt-menu__link");n.push({text:t=KTUtil.child(r,".kt-menu__link-text")?t.innerHTML:"",title:r.getAttribute("title"),href:r.getAttribute("href")})}return n.reverse()},getPageTitle:function(e){var t;return KTUtil.child(e,".kt-menu__link-text")?t.innerHTML:""},eventTrigger:function(e,t,o){for(var i=0;i<n.events.length;i++){var u=n.events[i];if(u.name==e){if(1!=u.one)return u.handler.call(this,t,o);if(0==u.fired)return n.events[i].fired=!0,u.handler.call(this,t,o)}}},addEvent:function(e,t,o){n.events.push({name:e,handler:t,one:o,fired:!1})},removeEvent:function(e){n.events[e]&&delete n.events[e]}};return n.setDefaults=function(e){l=e},n.scrollUpdate=function(){return r.scrollUpdate()},n.scrollReInit=function(){return r.scrollInit()},n.scrollTop=function(){return r.scrollTop()},n.setActiveItem=function(e){return r.setActiveItem(e)},n.reload=function(){return r.reload()},n.update=function(e){return r.update(e)},n.getBreadcrumbs=function(e){return r.getBreadcrumbs(e)},n.getPageTitle=function(e){return r.getPageTitle(e)},n.getSubmenuMode=function(e){return r.getSubmenuMode(e)},n.hideDropdown=function(e){r.hideSubmenuDropdown(e,!0)},n.hideDropdowns=function(){r.hideSubmenuDropdowns()},n.pauseDropdownHover=function(e){r.pauseDropdownHover(e)},n.resumeDropdownHover=function(){return r.resumeDropdownHover()},n.on=function(e,t){return r.addEvent(e,t)},n.off=function(e){return r.removeEvent(e)},n.one=function(e,t){return r.addEvent(e,t,!0)},r.construct.apply(n,[t]),KTUtil.addResizeHandler(function(){o&&n.reload()}),o=!0,n}};"undefined"!=typeof module&&void 0!==module.exports&&(module.exports=KTMenu),document.addEventListener("click",function(e){var t;if(t=KTUtil.get("body").querySelectorAll('.kt-menu__nav .kt-menu__item.kt-menu__item--submenu.kt-menu__item--hover:not(.kt-menu__item--tabs)[data-ktmenu-submenu-toggle="click"]'))for(var n=0,o=t.length;n<o;n++){var i=t[n].closest(".kt-menu__nav").parentNode;if(i){var u=KTUtil.data(i).get("menu");if(!u)break;if(!u||"dropdown"!==u.getSubmenuMode())break;e.target!==i&&!1===i.contains(e.target)&&u.hideDropdowns()}}});
