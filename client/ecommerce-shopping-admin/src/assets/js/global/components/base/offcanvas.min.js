"use strict";var KTOffcanvas=function(t,e){var l=this,o=KTUtil.get(t),n=KTUtil.get("body");if(o){var i={},s={construct:function(t){return KTUtil.data(o).has("offcanvas")?l=KTUtil.data(o).get("offcanvas"):(s.init(t),s.build(),KTUtil.data(o).set("offcanvas",l)),l},init:function(t){l.events=[],l.options=KTUtil.deepExtend({},i,t),l.overlay,l.classBase=l.options.baseClass,l.classShown=l.classBase+"--on",l.classOverlay=l.classBase+"-overlay",l.state=KTUtil.hasClass(o,l.classShown)?"shown":"hidden"},build:function(){if(l.options.toggleBy)if("string"==typeof l.options.toggleBy)KTUtil.addEvent(l.options.toggleBy,"click",function(t){t.preventDefault(),s.toggle()});else if(l.options.toggleBy&&l.options.toggleBy[0])if(l.options.toggleBy[0].target)for(var t in l.options.toggleBy)KTUtil.addEvent(l.options.toggleBy[t].target,"click",function(t){t.preventDefault(),s.toggle()});else for(var t in l.options.toggleBy)KTUtil.addEvent(l.options.toggleBy[t],"click",function(t){t.preventDefault(),s.toggle()});else l.options.toggleBy&&l.options.toggleBy.target&&KTUtil.addEvent(l.options.toggleBy.target,"click",function(t){t.preventDefault(),s.toggle()});var e=KTUtil.get(l.options.closeBy);e&&KTUtil.addEvent(e,"click",function(t){t.preventDefault(),s.hide()})},isShown:function(t){return"shown"==l.state},toggle:function(){s.eventTrigger("toggle"),"shown"==l.state?s.hide(this):s.show(this)},show:function(e){"shown"!=l.state&&(s.eventTrigger("beforeShow"),s.togglerClass(e,"show"),KTUtil.addClass(n,l.classShown),KTUtil.addClass(o,l.classShown),l.state="shown",l.options.overlay&&(l.overlay=KTUtil.insertAfter(document.createElement("DIV"),o),KTUtil.addClass(l.overlay,l.classOverlay),KTUtil.addEvent(l.overlay,"click",function(t){t.stopPropagation(),t.preventDefault(),s.hide(e)})),s.eventTrigger("afterShow"))},hide:function(t){"hidden"!=l.state&&(s.eventTrigger("beforeHide"),s.togglerClass(t,"hide"),KTUtil.removeClass(n,l.classShown),KTUtil.removeClass(o,l.classShown),l.state="hidden",l.options.overlay&&l.overlay&&KTUtil.remove(l.overlay),s.eventTrigger("afterHide"))},togglerClass:function(t,e){var o,n,i=KTUtil.attr(t,"id");if(l.options.toggleBy&&l.options.toggleBy[0]&&l.options.toggleBy[0].target)for(var s in l.options.toggleBy)l.options.toggleBy[s].target===i&&(o=l.options.toggleBy[s]);else l.options.toggleBy&&l.options.toggleBy.target&&(o=l.options.toggleBy);o&&(n=KTUtil.get(o.target),"show"===e&&KTUtil.addClass(n,o.state),"hide"===e&&KTUtil.removeClass(n,o.state))},eventTrigger:function(t,e){for(var o=0;o<l.events.length;o++){var n=l.events[o];if(n.name==t){if(1!=n.one)return n.handler.call(this,l,e);if(0==n.fired)return l.events[o].fired=!0,n.handler.call(this,l,e)}}},addEvent:function(t,e,o){l.events.push({name:t,handler:e,one:o,fired:!1})}};return l.setDefaults=function(t){i=t},l.isShown=function(){return s.isShown()},l.hide=function(){return s.hide()},l.show=function(){return s.show()},l.on=function(t,e){return s.addEvent(t,e)},l.one=function(t,e){return s.addEvent(t,e,!0)},s.construct.apply(l,[e]),l}};"undefined"!=typeof module&&void 0!==module.exports&&(module.exports=KTOffcanvas);
